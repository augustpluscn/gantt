(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a37c05d"],{"087c":function(t,e,a){"use strict";a("8215")},"0fca":function(t,e,a){},1276:function(t,e,a){"use strict";var i=a("2ba4"),n=a("c65b"),r=a("e330"),s=a("d784"),c=a("44e7"),o=a("825a"),l=a("1d80"),u=a("4840"),d=a("8aa5"),m=a("50c4"),f=a("577e"),h=a("dc4a"),p=a("f36a"),g=a("14c3"),v=a("9263"),b=a("9f7f"),T=a("d039"),y=b.UNSUPPORTED_Y,x=4294967295,k=Math.min,H=[].push,Y=r(/./.exec),C=r(H),_=r("".slice),w=!T((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));s("split",(function(t,e,a){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var r=f(l(this)),s=void 0===a?x:a>>>0;if(0===s)return[];if(void 0===t)return[r];if(!c(t))return n(e,r,t,s);var o,u,d,m=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,b=new RegExp(t.source,h+"g");while(o=n(v,b,r)){if(u=b.lastIndex,u>g&&(C(m,_(r,g,o.index)),o.length>1&&o.index<r.length&&i(H,m,p(o,1)),d=o[0].length,g=u,m.length>=s))break;b.lastIndex===o.index&&b.lastIndex++}return g===r.length?!d&&Y(b,"")||C(m,""):C(m,_(r,g)),m.length>s?p(m,0,s):m}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:n(e,this,t,a)}:e,[function(e,a){var i=l(this),s=void 0==e?void 0:h(e,t);return s?n(s,e,i,a):n(r,f(i),e,a)},function(t,i){var n=o(this),s=f(t),c=a(r,n,s,i,r!==e);if(c.done)return c.value;var l=u(n,RegExp),h=n.unicode,p=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(y?"g":"y"),v=new l(y?"^(?:"+n.source+")":n,p),b=void 0===i?x:i>>>0;if(0===b)return[];if(0===s.length)return null===g(v,s)?[s]:[];var T=0,H=0,Y=[];while(H<s.length){v.lastIndex=y?0:H;var w,E=g(v,y?_(s,H):s);if(null===E||(w=k(m(v.lastIndex+(y?H:0)),s.length))===T)H=d(s,H,h);else{if(C(Y,_(s,T,H)),Y.length===b)return Y;for(var O=1;O<=E.length-1;O++)if(C(Y,E[O]),Y.length===b)return Y;H=T=w}}return C(Y,_(s,T)),Y}]}),!w,y)},"25f0":function(t,e,a){"use strict";var i=a("e330"),n=a("5e77").PROPER,r=a("6eeb"),s=a("825a"),c=a("3a9b"),o=a("577e"),l=a("d039"),u=a("ad6d"),d="toString",m=RegExp.prototype,f=m[d],h=i(u),p=l((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),g=n&&f.name!=d;(p||g)&&r(RegExp.prototype,d,(function(){var t=s(this),e=o(t.source),a=t.flags,i=o(void 0===a&&c(m,t)&&!("flags"in m)?h(t):a);return"/"+e+"/"+i}),{unsafe:!0})},"286a":function(t,e,a){"use strict";a("0fca")},"4d9e":function(t,e,a){"use strict";a("56cb")},"56cb":function(t,e,a){},8215:function(t,e,a){},"8a4a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{style:{height:"calc(100vh - 30px - 30px)"}},[a("v-gantt-chart",{attrs:{startTime:t.startTime,endTime:t.endTime,cellWidth:t.cellWidth,cellHeight:t.cellHeight,titleHeight:t.titleHeight,scale:t.scale,titleWidth:t.titleWidth,showCurrentTime:"",dataKey:t.dataKey,datas:t.datas},scopedSlots:t._u([{key:"block",fn:function(e){var i=e.data,n=e.item;return[a("Test",{attrs:{data:i,currentTime:t.currentTime,item:n}})]}},{key:"left",fn:function(t){var e=t.data;return[a("TestLeft",{attrs:{data:e}})]}},{key:"title",fn:function(){return[t._v(" 排程甘特图 ")]},proxy:!0}])})],1),a("footer",{staticClass:"main-footer"})])},n=[],r=(a("d81d"),a("ac1f"),a("1276"),a("d3b7"),a("25f0"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"plan",style:{"background-color":t.statusColor},attrs:{title:t.title},on:{click:t.onClick}},[a("div",{staticClass:"runTime"}),a("div",{staticClass:"middle"},[t._v(t._s(t.item.name))]),a("div",{staticClass:"passenger"})])}),s=[],c=(a("b0c0"),a("c1df")),o=a.n(c),l={name:"Test",props:{data:Object,item:Object,currentTime:o.a,updateTimeLines:Function},data:function(){return{moment:o.a}},computed:{title:function(){return o()(this.item.start).format("HH:mm")+"~"+o()(this.item.end).format("HH:mm")+"\r\n"+this.item.name+"\r\n客户:"+this.item.cus+"\r\n数量:"+this.item.qty},statusColor:function(){var t=this.item,e=this.currentTime,a=o()(t.start),i=o()(t.end);return a.isBefore(e)&&i.isAfter(e)?"#65b2a7":i.isBefore(e)?"#9e9e9e":"#69b3e1"}},methods:{onClick:function(){this.updateTimeLines(this.item.start,this.item.end)}}},u=l,d=(a("087c"),a("2877")),m=Object(d["a"])(u,r,s,!1,null,"b5aeeca0",null),f=m.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"name",style:{background:t.data.color}},[a("div",{staticClass:"colorBar"}),a("div",{staticClass:"carId"},[t._v(t._s(t.data.name)+t._s(t.data.id))])])},p=[],g={name:"TestLeft",props:{data:Object}},v=g,b=(a("286a"),Object(d["a"])(v,h,p,!1,null,"47071e30",null)),T=b.exports,y=a("b199"),x="1,2,3,4,5,6,10,12,15,20,30,60,120,180,240,360,720,1440".split(",").map((function(t){return parseInt(t)})),k={name:"App",components:{Test:f,TestLeft:T},data:function(){return{miyao:"",currentTime:o()(),startTime:o()().subtract(5,"h").toString(),endTime:o()().add(2,"d").add(2,"h").add(5,"s").toString(),cellWidth:30,cellHeight:30,titleHeight:40,titleWidth:250,scale:60,datasNum:100,datas:[],dataKey:"id",scaleList:x,scrollToTime:o()().add(1,"d").toString(),scrollToPostion:{x:1e4,y:1e4}}},mounted:function(){var t=this.$route.query;Object.prototype.hasOwnProperty.call(t,"miyao")&&(this.miyao=t.miyao),this.getTask()},methods:{getTask:function(){var t=this;y["a"].getTask(this.miyao).then((function(e){t.task=e.data.task,t.setTaskFormat(e.data.task)}))},setTaskFormat:function(t){var e=o()("2900-01-01 00:00"),a=o()("1900-01-01 00:00"),i="",n=[],r={},s=[],c="",l="",u="",d=0;t.forEach((function(t){i!=t.机台编号&&(s.length>0&&(r.gtArray=s,n.push(r),s=[]),r={id:t.机台名称,name:t.机台名称},t.上机时间?(u=o()(t.上机时间),e=o.a.min(e,o()(t.上机时间))):(u=o()(),e=o.a.min(e,o()())),i=t.机台编号),d=(t.数量-t.完成数量)*t.单支时间+t.调机时间,d=d<0?0:d,c=u.format("YYYY-MM-DD HH:mm"),u.add(d,"m"),a=o.a.max(a,u),l=u.format("YYYY-MM-DD HH:mm"),s.push({id:t.任务单号,name:t.产品规格,cus:t.CompSimple,qty:t.数量-t.完成数量,passenger:100,start:c,end:l})})),s.length>0&&(r.gtArray=s,n.push(r)),e.subtract(2,"h"),a.add(2,"h"),this.startTime=e.format("YYYY-MM-DD HH:mm"),this.endTime=a.format("YYYY-MM-DD HH:mm"),this.datas=n}}},H=k,Y=(a("4d9e"),Object(d["a"])(H,i,n,!1,null,"7a4e420a",null));e["default"]=Y.exports},d81d:function(t,e,a){"use strict";var i=a("23e7"),n=a("b727").map,r=a("1dde"),s=r("map");i({target:"Array",proto:!0,forced:!s},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-7a37c05d.a2176cd0.js.map